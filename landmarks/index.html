<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <meta window="viewport" content="initial-scale=1.0">
        <title>Landmarks</title>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
        <link rel="stylesheet" href="landmarks_styles.css" />

        <script>
            var lat = 0, lng = 0;

            getLocation();

            function initialize_map() {

                var my_position = new google.maps.LatLng(lat, lng);
                console.log(my_position);

                var map = new google.maps.Map(document.getElementById("map"),
                            {center: my_position, zoom: 15});
                var marker = new google.maps.Marker({position: my_position,
                          animation: google.maps.Animation.DROP, map: map,
                                                    title: "Here I am!"});
                marker.addListener("click", function() {
                    info.open(map, marker);
                });
                var info = new google.maps.InfoWindow({content: "Here I am!"});

            }

            function getLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        lat = position.coords.latitude;
                        lng = position.coords.longitude;
                        console.log(lat);
                        console.log(lng);
                        initialize_map();
                    });
                } else {
                    alert("Geolocation is not supported by your web browser");
                }
            }
        </script>

    </head>

    <body onload="initialize_map()">
        <div id="map"></div>
    </body>


</html>